<!doctype html>
<html>
  <head prefix="og: http://ogp.me/ns# profile: http://ogp.me/ns/profile# article: http://ogp.me/ns/article#">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
    
    <meta name="theme-color" content="#FFFFFF">

    <title>Sinatra + Rack + Rake + ActiveRecord</title>
    
        <meta name="description" content="How to build an application with Sinatra, Rack and ActiveRecord?">
<meta property="og:title" content="Sinatra + Rack + Rake + ActiveRecord">
<meta property="og:type" content="article">
<meta property="og:description" content="How to build an application with Sinatra, Rack and ActiveRecord?">
<meta property="og:site_name" content="Defman.me">
<meta property="og:url" content="//defman.me/blog/sinatra-app/">
    <meta property="article:author" content="Sergey Kislyakov">
        <meta property="article:tag" content="sinatra">
        <meta property="article:tag" content="ruby">
        <meta property="article:tag" content="rest">
        <meta property="article:tag" content="api">

    <link href="/assets/stylesheets/base.css?1467695590" rel="stylesheet" />
  </head>
  <body class="blog blog_sinatra-app blog_sinatra-app_index">
    <div class="overlay">
    <div class="wrap">
        <header>
            <div class="logo"><a href="/">Defman.me</a></div>
            <nav>
                    <a href="/blog" id="blog" class="active">BLOG</a>
    <a href="/projects" id="projects" class="">PROJECTS</a>
    <a href="/schemes" id="schemes" class="">SCHEMES</a>

            </nav>
        </header>
        <main>
                <div class="container article" id="201605101630-create-sinatra-app">
        <span class="title">Sinatra + Rack + Rake + ActiveRecord</span>
        <span class="timestamp"><i class="fa fa-clock-o"></i> 2016/05/10 16:30</span>
        <span class="tags"><i class="fa fa-tags"></i> sinatra ruby rest api</span>
        <div class="content">
            <p>Building an application with Ruby is pretty interesting (at least for me).
You can use Rails if you want to do it fast or you can use Sinatra if you&rsquo;re
interested in building a very lightweight REST API application.</p>

<p>This article should help you create a simple Sinatra RESTFUL application with
Rack tasks for ActiveRecord and Rake.</p>

<h1>Creating a structure</h1>

<p>In my project, I use this structure for the application:</p>
<pre class="highlight plaintext"><code>.
├── apps
│   └── # your applications here
├── config.ru # Our Rack config
├── db
│   ├── config.yml # ActiveRecord database configuration
│   ├── migrate
│   │   └── # Migrations
│   └── schema.rb
├── environment.db
├── Gemfile
├── models
│   └── # Our ActiveRecord models (Bases) here
└── Rakefile # Our Rake tasks
</code></pre>

<p>Moving next!</p>

<h1>Gemfile</h1>

<p>We need <code class="prettyprint">sinatra</code>, <code class="prettyprint">sinatra-contrib</code>, <code class="prettyprint">activerecord</code>, <code class="prettyprint">rake</code>, <code class="prettyprint">rack</code> and
<code class="prettyprint">logger</code> in our project and <code class="prettyprint">slite3</code> or other driver for database.</p>
<pre class="highlight ruby"><code><span class="n">source</span> <span class="s1">'https://rubygems.org'</span>

<span class="n">gem</span> <span class="s1">'sinatra'</span>
<span class="n">gem</span> <span class="s1">'sinatra-contrib'</span>
<span class="n">gem</span> <span class="s1">'activerecord'</span>
<span class="n">gem</span> <span class="s1">'sqlite3'</span>
<span class="n">gem</span> <span class="s1">'rake'</span>
<span class="n">gem</span> <span class="s1">'rack'</span>
<span class="n">gem</span> <span class="s1">'logger'</span>
</code></pre>

<p>Run <code class="prettyprint">bundle</code> to install the gems.</p>

<h1>Rakefile</h1>

<p>If you want to use ActiveRecord tasks with Sinatra, you have to configure
Rackfile. It&rsquo;s not very hard and you don&rsquo;t have to install any extensions
(like <code class="prettyprint">sinatra-activerecord</code>).</p>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'yaml'</span>
<span class="nb">require</span> <span class="s1">'logger'</span>
<span class="nb">require</span> <span class="s1">'active_record'</span>

<span class="kp">include</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Tasks</span>

<span class="k">class</span> <span class="nc">Seeder</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
    <span class="vi">@seed</span> <span class="o">=</span> <span class="n">seed</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">load_seed</span>
    <span class="k">raise</span> <span class="s2">"Seed file '</span><span class="si">#{</span><span class="vi">@seed</span><span class="si">}</span><span class="s2">' does not exist"</span> <span class="k">unless</span> <span class="no">File</span><span class="p">.</span><span class="nf">file?</span> <span class="vi">@seed</span>
    <span class="nb">load</span> <span class="vi">@seed_file</span>
  <span class="k">end</span>
<span class="k">end</span>


<span class="n">root</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">expand_path</span> <span class="s1">'..'</span><span class="p">,</span> <span class="kp">__FILE__</span>
<span class="no">DatabaseTasks</span><span class="p">.</span><span class="nf">env</span> <span class="o">=</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'ENV'</span><span class="p">]</span> <span class="o">||</span> <span class="s1">'development'</span>
<span class="n">conf</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">join</span> <span class="n">root</span><span class="p">,</span> <span class="s1">'db/config.yml'</span>
<span class="no">DatabaseTasks</span><span class="p">.</span><span class="nf">database_configuration</span> <span class="o">=</span> <span class="no">YAML</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="no">File</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="n">conf</span><span class="p">))</span>
<span class="no">DatabaseTasks</span><span class="p">.</span><span class="nf">db_dir</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">join</span> <span class="n">root</span><span class="p">,</span> <span class="s1">'db'</span>
<span class="no">DatabaseTasks</span><span class="p">.</span><span class="nf">fixtures_path</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">join</span> <span class="n">root</span><span class="p">,</span> <span class="s1">'test/fixtures'</span>
<span class="no">DatabaseTasks</span><span class="p">.</span><span class="nf">migrations_paths</span> <span class="o">=</span> <span class="p">[</span><span class="no">File</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s1">'db/migrate'</span><span class="p">)]</span>
<span class="no">DatabaseTasks</span><span class="p">.</span><span class="nf">seed_loader</span> <span class="o">=</span> <span class="no">Seeder</span><span class="p">.</span><span class="nf">new</span> <span class="no">File</span><span class="p">.</span><span class="nf">join</span> <span class="n">root</span><span class="p">,</span> <span class="s1">'db/seeds.rb'</span>
<span class="no">DatabaseTasks</span><span class="p">.</span><span class="nf">root</span> <span class="o">=</span> <span class="n">root</span>

<span class="n">task</span> <span class="ss">:environment</span> <span class="k">do</span>
  <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">configurations</span> <span class="o">=</span> <span class="no">DatabaseTasks</span><span class="p">.</span><span class="nf">database_configuration</span>
  <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">establish_connection</span> <span class="no">DatabaseTasks</span><span class="p">.</span><span class="nf">env</span><span class="p">.</span><span class="nf">to_sym</span>
<span class="k">end</span>

<span class="nb">load</span> <span class="s1">'active_record/railties/databases.rake'</span>
</code></pre>

<p>Now if you run <code class="prettyprint">rake -T</code>, you should get the similar output:</p>
<pre class="highlight plaintext"><code>rake db:create              # Creates the database from DATABASE_URL or con...
rake db:drop                # Drops the database from DATABASE_URL or confi...
rake db:fixtures:load       # Load fixtures into the current environment's ...
rake db:migrate             # Migrate the database (options: VERSION=x, VER...
rake db:migrate:status      # Display status of migrations
rake db:rollback            # Rolls the schema back to the previous version...
rake db:schema:cache:clear  # Clear a db/schema_cache.dump file
rake db:schema:cache:dump   # Create a db/schema_cache.dump file
rake db:schema:dump         # Create a db/schema.rb file that is portable a...
rake db:schema:load         # Load a schema.rb file into the database
rake db:seed                # Load the seed data from db/seeds.rb
rake db:setup               # Create the database, load the schema, and ini...
rake db:structure:dump      # Dump the database structure to db/structure.sql
rake db:structure:load      # Recreate the databases from the structure.sql...
rake db:version             # Retrieves the current schema version number
</code></pre>

<p>It&rsquo;s truncated to 80 chars, but if you just see <code class="prettyprint">rake db:</code> - then you&rsquo;re good.</p>

<p>Now we should add a config file for our ActiveRecord connection.</p>

<h1>ActiveRecord config file</h1>

<p>It&rsquo;s placed at <code class="prettyprint">db/config.yml</code> and here&rsquo;s how it looks:</p>
<pre class="highlight yaml"><code><span class="s">development</span><span class="pi">:</span>
    <span class="s">adapter</span><span class="pi">:</span> <span class="s">sqlite3</span>
    <span class="s">database</span><span class="pi">:</span> <span class="s">development.db</span>
    <span class="s">pool</span><span class="pi">:</span> <span class="s">5</span>
    <span class="s">timeout</span><span class="pi">:</span> <span class="s">5000</span>
</code></pre>

<p>For better explanation, you should have a look at the official documentation.</p>

<p>Next we should create migrations for our app.</p>

<h1>Migrations</h1>

<p>In this tutorial, we will create <code class="prettyprint">users</code> table with <code class="prettyprint">001_create_users.rb</code>
migration placed in <code class="prettyprint">db/migrate/</code>.</p>
<pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">CreateUsers</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span>
  <span class="k">def</span> <span class="nf">up</span>
    <span class="n">create_table</span> <span class="ss">:users</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:username</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:password</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:email</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">down</span>
    <span class="n">drop_table</span> <span class="ss">:users</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<p>This code will create the <code class="prettyprint">users</code> table when migrating.</p>

<p>Run <code class="prettyprint">rake db:migrate</code> to execute migrations.</p>

<p>We have prepared everything, so now we&rsquo;re gonna create an application!</p>

<h1>Creating the application</h1>

<p>At first, let&rsquo;s create our Rack file (<code class="prettyprint">config.ru</code>)</p>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'sinatra/base'</span>
<span class="nb">require</span> <span class="s1">'sinatra/json'</span>
<span class="nb">require</span> <span class="s1">'sinatra/reloader'</span>

<span class="nb">require</span> <span class="s1">'active_record'</span>
<span class="nb">require</span> <span class="s1">'yaml'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="k">class</span> <span class="nc">BaseApp</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>

  <span class="c1"># Register custom extensions</span>

  <span class="n">configure</span> <span class="ss">:development</span> <span class="k">do</span>
    <span class="n">register</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Reloader</span>
  <span class="k">end</span>

  <span class="c1"># Configure ActiveRecord</span>

  <span class="n">env</span>    <span class="o">=</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'ENV'</span><span class="p">]</span> <span class="o">||</span> <span class="s1">'development'</span>
  <span class="n">root</span>   <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">expand_path</span> <span class="s1">'..'</span><span class="p">,</span> <span class="kp">__FILE__</span>
  <span class="n">config</span> <span class="o">=</span> <span class="no">YAML</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="no">File</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="no">File</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s1">'db/config.yml'</span><span class="p">)))</span>

  <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">configurations</span> <span class="o">=</span> <span class="n">config</span>
  <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">establish_connection</span> <span class="n">env</span><span class="p">.</span><span class="nf">to_sym</span>

  <span class="c1"># Create @body variable</span>

  <span class="n">before</span> <span class="k">do</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">.</span><span class="nf">content_length</span><span class="p">.</span><span class="nf">to_i</span> <span class="o">&gt;</span> <span class="mi">0</span>
      <span class="n">request</span><span class="p">.</span><span class="nf">body</span><span class="p">.</span><span class="nf">rewind</span>
      <span class="vi">@body</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span> <span class="n">request</span><span class="p">.</span><span class="nf">body</span><span class="p">.</span><span class="nf">read</span><span class="p">,</span> <span class="ss">symbolize_names: </span><span class="kp">true</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">Dir</span><span class="p">.</span><span class="nf">glob</span><span class="p">(</span><span class="s2">"./models/*.rb"</span><span class="p">).</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">file</span><span class="o">|</span>
  <span class="nb">require</span> <span class="n">file</span>
<span class="k">end</span>

<span class="no">Dir</span><span class="p">.</span><span class="nf">glob</span><span class="p">(</span><span class="s2">"./apps/*.rb"</span><span class="p">).</span><span class="nf">sort</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">file</span><span class="o">|</span>
  <span class="nb">require</span> <span class="n">file</span>
<span class="k">end</span>

<span class="n">map</span> <span class="s2">"/"</span> <span class="k">do</span>
  <span class="n">run</span> <span class="no">RootApp</span>
<span class="k">end</span>
</code></pre>

<p>So, what&rsquo;s going on there?</p>

<ol>
<li>At first, we require our dependencies.</li>
<li>We create a new instance of <code class="prettyprint">Sinatra::Base</code>, which contains some settings
and ActiveRecord connection initialization which our <code class="prettyprint">apps/</code> uses.</li>
<li>Next, because we&rsquo;re creating a RESTFUL API, we should accept request body
and parse it. This is the <code class="prettyprint">before</code> block, which invokes by Sinatra before the
active route. (so if an user call <code class="prettyprint">/route</code>, Sinatra executes <code class="prettyprint">before</code> and
then the route).</li>
<li><code class="prettyprint">Dir.glob</code> loads our models and apps. Models are loading first because
Apps depends on them.</li>
<li><code class="prettyprint">map</code> is some sort of namespaces, we could add more <code class="prettyprint">map</code> to run different
apps on these urls, so if you add <code class="prettyprint">map &#39;/users/ do ... end</code>, Rack will run the
code defined in the block for <code class="prettyprint">/users/*</code> url.</li>
</ol>

<p>In the code, <code class="prettyprint">map</code> binds <code class="prettyprint">/</code> to run RootApp. Let&rsquo;s take a look how <code class="prettyprint">RootApp</code>
looks.</p>

<p><strong>Path:</strong> <code class="prettyprint">apps/root.rb</code></p>
<pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">RootApp</span> <span class="o">&lt;</span> <span class="no">BaseApp</span>
  <span class="n">get</span> <span class="s2">"/"</span> <span class="k">do</span>
    <span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">find_by</span> <span class="ss">id: </span><span class="vi">@body</span><span class="p">[</span><span class="ss">:id</span><span class="p">]</span>
    <span class="k">if</span> <span class="vi">@user</span>
      <span class="n">json</span> <span class="ss">response: </span><span class="p">{</span>
        <span class="ss">status: :ok</span><span class="p">,</span>
        <span class="ss">errors: </span><span class="p">[],</span>
        <span class="ss">data: </span><span class="vi">@user</span><span class="p">,</span>
        <span class="ss">request: </span><span class="n">params</span><span class="p">,</span>
        <span class="ss">redirect: </span><span class="kp">nil</span>
      <span class="p">}</span>
    <span class="k">else</span>
      <span class="n">json</span> <span class="ss">response: </span><span class="p">{</span>
        <span class="ss">status: :fail</span><span class="p">,</span>
        <span class="ss">errors: </span><span class="p">[</span>
          <span class="s2">"User </span><span class="si">#{</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">]</span><span class="si">}</span><span class="s2"> does not exist"</span>
        <span class="p">],</span>
        <span class="ss">data: </span><span class="p">[],</span>
        <span class="ss">request: </span><span class="n">params</span><span class="p">,</span>
        <span class="ss">redirect: </span><span class="kp">nil</span>
      <span class="p">}</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">post</span> <span class="s1">'/'</span> <span class="k">do</span>
    <span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">create</span> <span class="ss">username: </span><span class="vi">@body</span><span class="p">[</span><span class="ss">:username</span><span class="p">],</span>
                        <span class="ss">password: </span><span class="vi">@body</span><span class="p">[</span><span class="ss">:password</span><span class="p">],</span>
                        <span class="ss">email: </span><span class="vi">@body</span><span class="p">[</span><span class="ss">:email</span><span class="p">]</span>
    <span class="k">if</span> <span class="vi">@user</span><span class="p">.</span><span class="nf">valid?</span>
      <span class="n">json</span> <span class="ss">response: </span><span class="p">{</span>
        <span class="ss">status: :ok</span><span class="p">,</span>
        <span class="ss">errors: </span><span class="p">[],</span>
        <span class="ss">data: </span><span class="vi">@user</span><span class="p">,</span>
        <span class="ss">request: </span><span class="vi">@body</span><span class="p">,</span>
        <span class="ss">redirect: </span><span class="s2">"/</span><span class="si">#{</span><span class="vi">@user</span><span class="p">.</span><span class="nf">id</span><span class="si">}</span><span class="s2">"</span>
      <span class="p">}</span>
    <span class="k">else</span>
      <span class="n">json</span> <span class="ss">response: </span><span class="p">{</span>
        <span class="ss">status: :fail</span><span class="p">,</span>
        <span class="ss">errors: </span><span class="vi">@user</span><span class="p">.</span><span class="nf">errors</span><span class="p">,</span>
        <span class="ss">data: </span><span class="p">[],</span>
        <span class="ss">request: </span><span class="vi">@body</span><span class="p">,</span>
        <span class="ss">redirect: </span><span class="s2">"/"</span>
      <span class="p">}</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<p>class <code class="prettyprint">RootApp</code> extends <code class="prettyprint">BaseApp</code>, so we don&rsquo;t have to re-initialize
ActiveRecord connection and register extensions again.</p>

<p><code class="prettyprint">get</code> and <code class="prettyprint">post</code> methods are bindings for <code class="prettyprint">GET /</code> and <code class="prettyprint">POST /</code> requests.</p>

<p><code class="prettyprint">get</code> Accepts JSON body with <code class="prettyprint">id</code> parameter in it and it&rsquo;s using ActiveRecord
to find the user by ID. If user with this ID does not exist, we response with
JSON contains <code class="prettyprint">errors</code> key, but if it does exist, we just return the data.</p>

<p><code class="prettyprint">post</code> uses the same ideology as <code class="prettyprint">get</code> for responding, but in this method
we&rsquo;re creating a new User instance using ActiveRecord::Base class (<code class="prettyprint">User</code>).</p>

<p>Let&rsquo;s take a look at it!</p>

<p><strong>Path:</strong> <code class="prettyprint">models/user.rb</code></p>
<pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">validates</span> <span class="ss">:username</span><span class="p">,</span> <span class="ss">length: </span><span class="p">{</span>
    <span class="ss">minimum: </span><span class="mi">6</span><span class="p">,</span>
    <span class="ss">maximum: </span><span class="mi">35</span><span class="p">,</span>
  <span class="p">},</span> <span class="ss">uniqueness: </span><span class="kp">true</span>

  <span class="n">validates</span> <span class="ss">:password</span><span class="p">,</span> <span class="ss">format: </span><span class="p">{</span>
    <span class="ss">with: </span><span class="sr">/\A[a-zA-Z0-9!@#\$%^&amp;\(\)]+\z/</span><span class="p">,</span>
    <span class="ss">message: </span><span class="s2">"only allows a-z, 0-9 and !@#$%^&amp;*()"</span>
  <span class="p">}</span>
<span class="k">end</span>
</code></pre>

<p>As you can see, there are no new methods defined, but I&rsquo;ve
added some validations:</p>

<ol>
<li>Username should have 6-35 characters and be unique.</li>
<li>Password should contain only a-z, 0-9 and !@#$%^&amp;*().</li>
</ol>

<p>You can add validation for <code class="prettyprint">:email</code> field as well, but the best
validation for e-mail is sending a mail to it with a confirmation link.</p>

<p>And&hellip; we&rsquo;re done! Now you should able to run your application with
<code class="prettyprint">rackup -p 3000</code>.</p>

<ul>
<li>To create an user, send POST request to <code class="prettyprint">localhost:3000/</code> with credentials.</li>
<li>To view an user, send GET request to <code class="prettyprint">localhost:3000/</code> with ID of the user.</li>
</ul>

<p>You could try to send invalid data or non-existent ID to see if it works
(it should give you a JSON response contains <code class="prettyprint">errors</code> key with some data
inside and the empty <code class="prettyprint">data</code> array).</p>

<p>If you have any questions, feel free to ask them in the comments!</p>

        </div>
        <div class="links">
                    <p>
            <a href="//github.com/Defman21/simple-sinatra-app" class="external-link">
                <i class="fa fa-github"></i> Simple Sinatra App
            </a>
        </p>

        </div>
            <div class="comments">
        <div id="comments_loading"># comments are loading, please wait</div>
        <div id="disqus_thread"></div>
        <script>
            var disqus_config = function () {
                this.page.url = "http://defman.me/blog/sinatra-app/";
                this.page.identifier = "201605101630-create-sinatra-app";
            };
            var loadDisqusComments = (function() {
                (e=document.getElementById('comments_loading')).parentNode.removeChild(e);
                var d = document, s = d.createElement('script');

                s.src = '//defman.disqus.com/embed.js';

                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            });
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    </div>
    <script src="/assets/javascripts/lazyload.js?1467695590"></script>

    </div>

        </main>
    </div>
</div>
<footer>
    <div class="copyright">
        <a href="https://github.com/Defman21/defman.me">defman.me &copy; 2016</a>
        <br>
        Colors used: <a class="nonewline" href="/materia">Materia</a>
    </div>
</footer>

    <link href='//fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css'>
    <link href="/assets/stylesheets/font-awesome.css?1467695590" rel="stylesheet" />
            <link href="/assets/stylesheets/index.css?1467695590" rel="stylesheet" />
    <link href="/assets/stylesheets/highlight/styles.css?1467695590" rel="stylesheet" />

    
    <script src="/assets/javascripts/jquery.js?1467695590"></script>
    <script src="/assets/javascripts/main.lib.js?1467695590"></script>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-52157854-2', 'auto');
    ga('send', 'pageview');
  </script>
  </body>
</html>

