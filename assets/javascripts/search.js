(function(){!function(e,n){var s;return n(document).keyup(function(e){return 27===e.keyCode?n("#results").empty().css("display","none"):void 0}),n(document).click(function(){return n("#results").css("display","none")}),n(document).on("click",".result, #search input",function(e){return e.stopPropagation()}),(s=function(){var t,r,u;return r=search_config.type,t=search_config.show_type,console.log(search_config),u=[],n.getJSON("/json/"+r+".json",function(e){var n,s,t,r;for(r=[],n=0,t=e.length;t>n;n++)s=e[n],r.push(u.push(s));return r}).then(function(){return n("#search input").focus(),n("#search input").focus(function(e){return n(e.target).val().length>0?doSearch(e):void 0}),e.doSearch=function(e){var r,l,a,c,o,i,p,d,f,h,g,y,m,v,O,x;if(i=!1,o=[],n("#results").empty(),O=n(e.target).val().toLowerCase(),O.length<=1)return void n("#results").css("display","none");for(n("#results").css("display","block"),v=O.split(" "),x=[],p=0,g=v.length;g>p;p++)h=v[p],m=h.split(":"),m.length>1&&m[1].length>0?(x.push(m[1]),o.push(m[0])):m[0].length>0&&("@"===m[0][0]?o.push(m[0].substr(1)):x.push(m[0]));for(a="<div class='result'>\n  <span class='title'>\n    <a href='%url'><span class='link'>%name</span> <span class='description'>%desc</span></a>\n  </span>\n</div>",c=[],f=0,y=u.length;y>f;f++)d=u[f],s="",null!=d.tags&&-1!==o.indexOf("tag")&&(s+=" "+d.tags),null!=d.lang&&-1!==o.indexOf("lang")&&(s+=" "+d.lang),null!=d.type&&-1!==o.indexOf("type")&&(s+=" "+d.type),0===s.length&&(s=d.name+" "+d.desc),s=s.toLowerCase(),-1!==o.indexOf("strict")?(O=x.join(" "),-1!==s.indexOf(O)&&-1===c.indexOf(d.uuid)&&(l=d.desc,t&&(l+=" ("+d.type+")"),r=a.replace("%url",d.url).replace("%desc",l).replace("%name",d.name),n("#results").append(n(r)),c.push(d.uuid),i=!0)):x.forEach(function(e){-1!==s.indexOf(e)&&-1===c.indexOf(d.uuid)&&(l=d.desc,t&&(l+=" ("+d.type+")"),r=a.replace("%url",d.url).replace("%desc",l).replace("%name",d.name),n("#results").append(n(r)),c.push(d.uuid),i=!0)});return i?void 0:(r=a.replace("%url","#").replace("%desc","No results found").replace("%name","No results"),n("#results").append(n(r)))},n("#search input").keyup(function(e){return doSearch(e)})})})()}(window,jQuery)}).call(this);